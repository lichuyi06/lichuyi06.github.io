<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/08/10/form%E8%A1%A8%E5%8D%95%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2025/08/10/form%E8%A1%A8%E5%8D%95%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>form表单中常见的问题</title>
    <link href="/2025/08/10/vue3%E4%B8%AD%E4%BD%BF%E7%94%A8element-Plus%E9%81%87%E8%A7%81%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2025/08/10/vue3%E4%B8%AD%E4%BD%BF%E7%94%A8element-Plus%E9%81%87%E8%A7%81%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="form表单中常见的问题"><a href="#form表单中常见的问题" class="headerlink" title="form表单中常见的问题"></a>form表单中常见的问题</h1><h2 id="resetField-重置表单"><a href="#resetField-重置表单" class="headerlink" title="resetField 重置表单"></a>resetField 重置表单</h2><p>1 问题复现：假设现在定义了一下表单数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> ruleForm = ref&lt;userInfoResult&gt;(&#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">gender</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">employeeNumber</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">departmentId</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">permissionLevel</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">roles</span>: [],<br>  <span class="hljs-attr">permissions</span>: [],<br>&#125;)<br></code></pre></td></tr></table></figure><p>在操作完后使用resetField()方法重置，导致某一项id字段未清除， 往往是因为具体的item项上的prop为绑定，</p><p>请注意，这里有个坑，方法重置的是<strong>初始值</strong>，如果你在onMounted里面设置为表单设置初始值，比如ruleForm.value &#x3D; res， 这时候再使用resetField()数据并不会被重置，因为这时候初始值已经被替换掉了， 应该使用nextick，等DOM更新完毕在设置数据的值，这个时候既可正确清除。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(ruleForm.<span class="hljs-property">value</span>, item)<br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue element-plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>test</title>
    <link href="/2025/07/22/test/"/>
    <url>/2025/07/22/test/</url>
    
    <content type="html"><![CDATA[<h1 id="测试文章"><a href="#测试文章" class="headerlink" title="测试文章"></a>测试文章</h1><ul><li>dwwdqwwq</li></ul>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>v-model在 vue2 和 vue3 组件上的具体区别</title>
    <link href="/2025/07/22/v-model%E5%9C%A8%20vue2%20%E5%92%8C%20vue3%20%E7%BB%84%E4%BB%B6%E4%B8%8A%E7%9A%84%E5%85%B7%E4%BD%93%E5%8C%BA%E5%88%AB/"/>
    <url>/2025/07/22/v-model%E5%9C%A8%20vue2%20%E5%92%8C%20vue3%20%E7%BB%84%E4%BB%B6%E4%B8%8A%E7%9A%84%E5%85%B7%E4%BD%93%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="v-model在-vue2-和-vue3-组件上的具体区别"><a href="#v-model在-vue2-和-vue3-组件上的具体区别" class="headerlink" title="v-model在 vue2 和 vue3 组件上的具体区别"></a>v-model在 vue2 和 vue3 组件上的具体区别</h1><p>无论在 Vue 2 还是 Vue 3 中，<code>v-model</code> 在组件上的使用都依赖于子组件主动触发对应的事件，才能实现父子之间的数据同步。需要遵循单项数据流的原则，子组件是可能去主动修改父组件传递值变化，只能通知父组件去修改，谁的数据谁维护。</p><h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- Test.vue --&gt;<br>&lt;CustomInput v-model=&quot;searchText&quot; /&gt;<br><br>等同于<br>&lt;CustomInput<br>  :value=&quot;searchText&quot;<br>  @input=&quot;newValue =&gt; searchText = newValue&quot;<br>/&gt;<br></code></pre></td></tr></table></figure><template>  <input type="text" :value="value" @input="handleInput($event)" /></template><script>export default {  props: {    value: String  },  methods: {    handleInput (event) {      this.$emit('input', event.target.value)    }  }}</script><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- CustomInput.vue --&gt;<br>&lt;template&gt;<br>  &lt;input type=&quot;text&quot; :value=&quot;value&quot; @input=&quot;handleInput($event)&quot; /&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>export default &#123;<br>  props: &#123;<br>    value: String<br>  &#125;,<br>  methods: &#123;<br>    handleInput (event) &#123;<br>      this.$emit(&#x27;input&#x27;, event.target.value)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>以上是常规使用中的，但是值得注意的是在组件上 v-model 只可使用一次。vue3中使用也是如此，只不过vue3中默认传递的是modelValue属性，允许多次使用在一个组件中，所有vue3就没有.sync修饰符了</p><ul><li><p>vue3中的v-model</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 父组件中 --&gt;<br>&lt;CustomInput v-model=&quot;searchText&quot; /&gt;<br><br>&lt;!-- 等同于 --&gt;<br>&lt;CustomInput<br>  :modelValue=&quot;searchText&quot;<br>  @update:modelValue=&quot;newValue =&gt; searchText = newValue&quot;<br>/&gt;<br><br><br>&lt;!-- CustomInput.vue --&gt;<br>&lt;template&gt;<br>  &lt;input :value=&quot;modelValue&quot; @input=&quot;onInput&quot; /&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>import &#123; defineProps, defineEmits &#125; from &#x27;vue&#x27;<br>const props = defineProps(&#123;<br>  modelValue: String<br>&#125;)<br>const emit = defineEmits([&#x27;update:modelValue&#x27;])<br>const onInput = (event)=&gt; &#123;<br>  emit(&#x27;update:modelValue&#x27;, event.target.value)<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>在实际使用中都不太会设计原生的，所以这些触发事件经常写进某个组件官方提供的值修改变化了的事件里面，可以写在里面 也可以写在外面再去调用这些方法，如果你的项目复杂，并且设计组件二次封装，我是推荐封装为独立的函数再去调用，你可以更好的去输出打印语句，只聚焦去传递的值变化情况。</p><p>实际开发中往往vue3的项目都是采用TS，所以类型定义就需要想清楚，捋清楚到底传出去的可能是个什么值，接收的是什么样的值。</p></li></ul><h2 id="sync-修饰符"><a href="#sync-修饰符" class="headerlink" title=".sync 修饰符"></a>.sync 修饰符</h2><p>这个是vue2特有的，是为了<code>v-model</code> 不能同时绑定多个 prop 而设计的语法糖。通过.sync修饰符子组件就可以修改父组件传递下来的值，就不用触发emit事件去通知父组件修改，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- 父组件 --&gt;<br>&lt;MyComponent :title=&quot;myTitle&quot; @update:title=&quot;val =&gt; myTitle = val&quot; /&gt;<br>&lt;!-- 等价于 --&gt;<br>&lt;MyComponent :title.sync=&quot;myTitle&quot; /&gt;<br></code></pre></td></tr></table></figure><h2 id="v-model-内置修饰符"><a href="#v-model-内置修饰符" class="headerlink" title="v-model 内置修饰符"></a>v-model 内置修饰符</h2><p>v-model 有一些内置的修饰符，例如 .trim，.number 和 .lazy</p><h2 id="v-model-自定义修饰符-vue3"><a href="#v-model-自定义修饰符-vue3" class="headerlink" title="v-model 自定义修饰符(vue3)"></a>v-model 自定义修饰符(vue3)</h2>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于vue3+ts+vite构建的项目 组件自动注入和声明的问题</title>
    <link href="/2025/07/22/%E5%85%B3%E4%BA%8Evue3+ts+vite%E6%9E%84%E5%BB%BA%E7%9A%84%E9%A1%B9%E7%9B%AE%20%E7%BB%84%E4%BB%B6%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E5%92%8C%E5%A3%B0%E6%98%8E%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2025/07/22/%E5%85%B3%E4%BA%8Evue3+ts+vite%E6%9E%84%E5%BB%BA%E7%9A%84%E9%A1%B9%E7%9B%AE%20%E7%BB%84%E4%BB%B6%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E5%92%8C%E5%A3%B0%E6%98%8E%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="关于vue3-ts-vite构建的项目-组件自动注入和声明的问题"><a href="#关于vue3-ts-vite构建的项目-组件自动注入和声明的问题" class="headerlink" title="关于vue3+ts+vite构建的项目 组件自动注入和声明的问题"></a>关于vue3+ts+vite构建的项目 组件自动注入和声明的问题</h1><p>本文分为两次吧，看看使用插件和自己注册</p><p><strong>在使用自定义组件注册的时候，一定要defineOptions({ name: ‘DateTimePicker’ }) 向外暴露组件的名字</strong>不然无法生效！</p><p>分为三个吧 组件的按需引入，第三方库的API自动导入(如vue的 ref，onMounted，自定义的hooks),样式的按需导入</p><h2 id="组件按需引入"><a href="#组件按需引入" class="headerlink" title="组件按需引入"></a>组件按需引入</h2><p>安装</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cmd">npm i unplugin-vue-components -D  // Vue官方人员开发的一款自动引入插件<br><br>npm i -D unplugin-auto-import    //为 Vite、Webpack、Rollup 和 esbuild 按需自动导入 API，支持 TypeScript<br><br></code></pre></td></tr></table></figure><p>unplugin-auto-import是为了解决在开发中的导入问题，比如经常不清楚相对路径的问题这个插件会在根目录生成一个auto-import.d.ts，这个文件会将所有的插件导入到global中，这样在使用的时候直接就可以使用了。</p><p>1 自动注册组件。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/vite&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElementPlusResolver</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/resolvers&#x27;</span><br><br><span class="hljs-attr">plugins</span>: [<br>    ........,<br>      <span class="hljs-title class_">Components</span>(&#123;<br>        <span class="hljs-attr">dirs</span>: [<span class="hljs-string">&#x27;src/components&#x27;</span>], <span class="hljs-comment">// 配置需要默认导入的自定义组件文件夹，该文件夹下的所有组件都会自动 import</span><br>        <span class="hljs-attr">dts</span>: <span class="hljs-string">&#x27;src/type/global-components.d.ts&#x27;</span>, <span class="hljs-comment">// 配置声明文件生成位置</span><br>        <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;vue&#x27;</span>],  <span class="hljs-comment">// 组件的有效文件扩展名。</span><br>         <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否搜索子目录</span><br>         <span class="hljs-attr">directoryAsNamespace</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 允许子目录作为组件的命名空间前缀。</span><br>          <span class="hljs-attr">globalNamespaces</span>: [], <span class="hljs-comment">// 忽略命名空间前缀的子目录路径</span><br>          <span class="hljs-attr">directives</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// // 自动导入指令 default: `true` for Vue 3, `false` for Vue 2</span><br>      &#125;),<br>]<br></code></pre></td></tr></table></figure><p>现在就会在对应的文件里面自动生成代码了，一个是组件全局注册的和组件声明的，为什么要声明组件？ 在自定义组件的时候往往对props参数做了类型限制，如果不声明可能在使用该组件的时候缺少TS类型校验。</p><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/QQ20250807-170055.png"></p><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/QQ20250807-170952.png"></p><h2 id="API的按需导入"><a href="#API的按需导入" class="headerlink" title="API的按需导入"></a>API的按需导入</h2><p>配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-auto-import/vite&#x27;</span><br><span class="hljs-comment">// 在defineConfig里面配置</span><br><span class="hljs-title class_">AutoImport</span>(&#123;<br>   ......<br>   <span class="hljs-comment">// resolvers: [ElementPlusResolver()],</span><br>   <span class="hljs-attr">imports</span>: [<span class="hljs-string">&#x27;vue&#x27;</span>, <span class="hljs-string">&#x27;vue-router&#x27;</span>, <span class="hljs-string">&#x27;vue-i18n&#x27;</span>, <span class="hljs-string">&#x27;@vueuse/core&#x27;</span>, <span class="hljs-string">&#x27;pinia&#x27;</span>],<br>   <span class="hljs-attr">dts</span>: <span class="hljs-string">&#x27;./auto-imports.d.ts&#x27;</span>,<br>   <span class="hljs-attr">dirs</span>: [<span class="hljs-string">&#x27;src/stores&#x27;</span>, <span class="hljs-string">&#x27;src/composables&#x27;</span>, <span class="hljs-string">&#x27;src/hooks&#x27;</span>], <span class="hljs-comment">// 导入hooks等需要注入的自定义函数</span><br> &#125;),<br></code></pre></td></tr></table></figure><p>生成的按需导入api</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// Generated by &#x27;unplugin-auto-import&#x27;</span><br><span class="hljs-keyword">export</span> &#123;&#125;<br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title class_">EffectScope</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;vue&#x27;</span>)[<span class="hljs-string">&#x27;EffectScope&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">acceptHMRUpdate</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;pinia&#x27;</span>)[<span class="hljs-string">&#x27;acceptHMRUpdate&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">asyncComputed</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;asyncComputed&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">autoResetRef</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;autoResetRef&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">computed</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;vue&#x27;</span>)[<span class="hljs-string">&#x27;computed&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">computedAsync</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;computedAsync&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">computedEager</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;computedEager&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">computedInject</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;computedInject&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">computedWithControl</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;computedWithControl&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">controlledComputed</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;controlledComputed&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">controlledRef</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@vueuse/core&#x27;</span>)[<span class="hljs-string">&#x27;controlledRef&#x27;</span>]<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">createApp</span>: <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;vue&#x27;</span>)[<span class="hljs-string">&#x27;createApp&#x27;</span>]<br></code></pre></td></tr></table></figure><h2 id="vite-plugin-style-import"><a href="#vite-plugin-style-import" class="headerlink" title="vite-plugin-style-import"></a>vite-plugin-style-import</h2><p>这里我没使用，但是用一篇别人的文章来转述吧</p><p>当你使用unplugin-vue-components来引入ui库的时候</p><p>message, notification 等引入样式不生效 安装vite-plugin-style-import即可</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// vite.config.js</span><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> styleImport, &#123;<br>  <span class="hljs-title class_">AndDesignVueResolve</span>,<br>  <span class="hljs-title class_">VantResolve</span>,<br>  <span class="hljs-title class_">ElementPlusResolve</span>,<br>  <span class="hljs-title class_">NutuiResolve</span>,<br>  <span class="hljs-title class_">AntdResolve</span><br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-style-import&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-title function_">styleImport</span>(&#123;<br>      <span class="hljs-attr">resolves</span>: [<br>        <span class="hljs-title class_">AndDesignVueResolve</span>(),<br>        <span class="hljs-title class_">VantResolve</span>(),<br>        <span class="hljs-title class_">ElementPlusResolve</span>(),<br>        <span class="hljs-title class_">NutuiResolve</span>(),<br>        <span class="hljs-title class_">AntdResolve</span>()<br>      ],<br>      <span class="hljs-comment">// 自定义规则</span><br>      <span class="hljs-attr">libs</span>: [<br>        &#123;<br>          <span class="hljs-attr">libraryName</span>: <span class="hljs-string">&#x27;ant-design-vue&#x27;</span>,<br>          <span class="hljs-attr">esModule</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">resolveStyle</span>: <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">`ant-design-vue/es/<span class="hljs-subst">$&#123;name&#125;</span>/style/index`</span><br>          &#125;<br>        &#125;<br>      ]<br>    &#125;)<br>  ],<br>  <span class="hljs-comment">// 引用使用less的库要配置一下</span><br>  <span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>      <span class="hljs-attr">less</span>: &#123;<br>        <span class="hljs-attr">javascriptEnabled</span>: <span class="hljs-literal">true</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br><br>作者：藤原托漆<br>链接：<span class="hljs-attr">https</span>:<span class="hljs-comment">//juejin.cn/post/7012446423367024676</span><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br></code></pre></td></tr></table></figure><h2 id="注意点，报错"><a href="#注意点，报错" class="headerlink" title="注意点，报错"></a>注意点，报错</h2><p>还有个坑，如果项目中用了 eslint或者TS 会出现校验错误的，这个时候</p><p>[解决错误]: <a href="https://blog.csdn.net/sayUonly/article/details/123482912">https://blog.csdn.net/sayUonly/article/details/123482912</a>“文章链接”</p><p>我之前是ts出现错误，我加了句：.&#x2F;auto-imports.d.ts到ts的配置文件里面去了，就不会报ts错误。</p><p>同样的加个.&#x2F;components.d.ts 组件的声明文件，否则组件不会有类型提示，路径位置就是之前配置生成的位置，推荐这种全局文件位置放在src外面。整体配置好效果就是如下。有可能还会产生一个问题，就是使用pnpm命令创建的vite项目无法在vscode中获得组件类型提示，这个可以去看官方社区给出的。 还是要跟你的插件版本来看。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-string">&quot;include&quot;</span>: [<span class="hljs-string">&quot;src/**/*.ts&quot;</span>, <span class="hljs-string">&quot;src/**/*.d.ts&quot;</span>,<span class="hljs-string">&quot;./components.d.ts&quot;</span>, <span class="hljs-string">&quot;src/**/*.tsx&quot;</span>, <span class="hljs-string">&quot;src/**/*.vue&quot;</span>,<span class="hljs-string">&quot;./auto-imports.d.ts&quot;</span>],<br></code></pre></td></tr></table></figure><p>然后使用效果就是如下了，会有类型声明。</p><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/fb0e6a5b-249e-4e28-acbf-70081499ee14.png"></p><p>至此也是解决了自动引入自动声明的问题，</p><h2 id="我之前的写法！"><a href="#我之前的写法！" class="headerlink" title="我之前的写法！"></a>我之前的写法！</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">App</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-comment">// 自动加载 components 下的所有 .vue 文件</span><br><span class="hljs-keyword">const</span> modules = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-title function_">glob</span>(<span class="hljs-string">&#x27;@/components/**/*.vue&#x27;</span>, &#123; <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span> &#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">registerGlobalComponents</span>(<span class="hljs-params"><span class="hljs-attr">app</span>: <span class="hljs-title class_">App</span></span>) &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> path <span class="hljs-keyword">in</span> modules) &#123;<br>    <span class="hljs-keyword">const</span> component = (modules[path] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">default</span><br>    <span class="hljs-keyword">if</span> (component?.<span class="hljs-property">name</span>) &#123;<br>      app.<span class="hljs-title function_">component</span>(component.<span class="hljs-property">name</span>, component)<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`全局注册组件: <span class="hljs-subst">$&#123;component.name&#125;</span> (来自: <span class="hljs-subst">$&#123;path&#125;</span>)`</span>)<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 在开发环境下，打印所有注册的组件名，方便手动维护类型声明</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>) &#123;<br>    <span class="hljs-keyword">const</span> componentNames = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(modules)<br>      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">module</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>?.<span class="hljs-property">name</span>)<br>      .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;已注册的全局组件列表:&#x27;</span>, componentNames.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;, &#x27;</span>))<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;请确保在 src/types/global-components.d.ts 中声明这些组件的类型&#x27;</span>)<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>声明文件手动生成，也就是写了一个ts文件，每次启动项目时候生成一个声明文件</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs ts"><br><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span><br><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span><br><span class="hljs-comment">// 扫描组件目录</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">scanComponents</span>(<span class="hljs-params"><span class="hljs-attr">dir</span>: <span class="hljs-built_in">string</span></span>): &#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> &#125;[] &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">components</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> &#125;[] = []<br>  <span class="hljs-keyword">const</span> files = fs.<span class="hljs-title function_">readdirSync</span>(dir, &#123; <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> &#125;)<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> files) &#123;<br>    <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(dir, file.<span class="hljs-property">name</span>)<br>    <span class="hljs-keyword">if</span> (file.<span class="hljs-title function_">isDirectory</span>()) &#123;<br>      <span class="hljs-comment">// 递归扫描子目录</span><br>      components.<span class="hljs-title function_">push</span>(...<span class="hljs-title function_">scanComponents</span>(fullPath))<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (file.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;index.vue&#x27;</span>) &#123;<br>      <span class="hljs-comment">// 读取组件文件，提取组件名</span><br>      <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(fullPath, <span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>      <span class="hljs-keyword">const</span> nameMatch = content.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/defineOptions\(\s*&#123;\s*name:\s*[&#x27;&quot;`]([^&#x27;&quot;`]+)[&#x27;&quot;`]/</span>)<br>      <span class="hljs-keyword">if</span> (nameMatch) &#123;<br>        <span class="hljs-keyword">const</span> componentName = nameMatch[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">const</span> relativePath = path.<span class="hljs-title function_">relative</span>(process.<span class="hljs-title function_">cwd</span>(), fullPath).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">&#x27;/&#x27;</span>)<br>        components.<span class="hljs-title function_">push</span>(&#123;<br>          <span class="hljs-attr">name</span>: componentName,<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">`@/<span class="hljs-subst">$&#123;relativePath.replace(<span class="hljs-string">&#x27;src/&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)&#125;</span>`</span>,<br>        &#125;)<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> components<br>&#125;<br><span class="hljs-comment">// 生成类型声明文件</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateTypeDeclaration</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> componentsDir = path.<span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">&#x27;src/components&#x27;</span>)<br>  <span class="hljs-keyword">const</span> components = <span class="hljs-title function_">scanComponents</span>(componentsDir)<br>  <span class="hljs-keyword">let</span> typeContent = <span class="hljs-string">`// Vue 全局组件类型声明 - 自动生成</span><br><span class="hljs-string">// 此文件由 scripts/generate-global-types.js 自动生成，请勿手动修改</span><br><span class="hljs-string"></span><br><span class="hljs-string">`</span><br>  <span class="hljs-comment">// 生成导入语句</span><br>  components.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">comp</span>) =&gt;</span> &#123;<br>    typeContent += <span class="hljs-string">`import <span class="hljs-subst">$&#123;comp.name&#125;</span> from &#x27;<span class="hljs-subst">$&#123;comp.path&#125;</span>&#x27;\n`</span><br>  &#125;)<br><br>  typeContent += <span class="hljs-string">`</span><br><span class="hljs-string">declare module &#x27;vue&#x27; &#123;</span><br><span class="hljs-string">  export interface GlobalComponents &#123;</span><br><span class="hljs-string">`</span><br>  <span class="hljs-comment">// 生成接口声明</span><br>  components.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">comp</span>) =&gt;</span> &#123;<br>    typeContent += <span class="hljs-string">`    <span class="hljs-subst">$&#123;comp.name&#125;</span>: typeof <span class="hljs-subst">$&#123;comp.name&#125;</span>\n`</span><br>  &#125;)<br>  typeContent += <span class="hljs-string">`  &#125;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">export &#123;&#125;</span><br><span class="hljs-string">`</span><br>  <span class="hljs-comment">// 写入文件</span><br>  <span class="hljs-keyword">const</span> outputPath = path.<span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">&#x27;src/types/global-components.d.ts&#x27;</span>)<br>  fs.<span class="hljs-title function_">writeFileSync</span>(outputPath, typeContent)<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`已生成全局组件类型声明文件: <span class="hljs-subst">$&#123;outputPath&#125;</span>`</span>)<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`发现 <span class="hljs-subst">$&#123;components.length&#125;</span> 个组件:`</span>)<br>  components.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">comp</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   - <span class="hljs-subst">$&#123;comp.name&#125;</span> (<span class="hljs-subst">$&#123;comp.path&#125;</span>)`</span>)<br>  &#125;)<br>&#125;<br><span class="hljs-comment">// 执行生成</span><br><span class="hljs-title function_">generateTypeDeclaration</span>()<br><span class="hljs-comment">// 生成的代码如下，这个时候使用就用类型声明了</span><br></code></pre></td></tr></table></figure><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/QQ20250808-101649.png"></p><p>使用的时候就是如下的类型提示了</p><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/QQ20250808-101921.png"></p><h2 id="我的配置"><a href="#我的配置" class="headerlink" title="我的配置"></a>我的配置</h2><p><img src="https://lichuyi-self.oss-cn-chengdu.aliyuncs.com/%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E7%BB%84%E4%BB%B6.png"></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/07/22/hello-world/"/>
    <url>/2025/07/22/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
